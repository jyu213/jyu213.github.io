<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="Hugo 0.15" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <link rel='stylesheet' href='//fonts.googleapis.com/css?family=Open+Sans|Marcellus+SC'>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/solarized_dark.min.css">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/custom.css">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://jyu213.github.io//index.xml">

    
    <title>主流CSS image比较 - 见见 - 前端小记</title>
    <meta property='og:title' content="主流CSS image比较 - 见见 - 前端小记">
    <meta property="og:type" content="article">
    

    <meta property="og:url" content="http://jyu213.github.io/blog/2014/08/29/%E4%B8%BB%E6%B5%81css-image%E6%AF%94%E8%BE%83/">
    
    

  </head>

  <body>

    <header class="site">
      <nav class="navbar navbar-default">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://jyu213.github.io/">见见 - 前端小记</a>
          </div>

          <div id="navbar" class="collapse navbar-collapse">
            
          </div>

        </div>
      </nav>
    </header>

    <div class="site">
      <div class="container">



<div class="single">

  <div class="row">
    <div class="col-md-8">

      <article class="single" itemscope="itemscope" itemtype="http://schema.org/Article">

        <meta itemprop="mainEntityOfPage"  itemType="https://schema.org/WebPage" content="http://jyu213.github.io/"/>
        <meta itemprop="dateModified" content="2014-08-29T00:00:00&#43;00:00">
        <meta itemprop="headline" content="主流CSS image比较">
        <meta itemprop="description" content="在还原设计图的时候，难免会碰到一些样式图片的引用。如何来对这些图片做优化呢？本文简单的梳理了一下目前几种比较常用的使用方式。 注： 1. 有更好的方">
        <meta itemprop="url" content="http://jyu213.github.io/blog/2014/08/29/%E4%B8%BB%E6%B5%81css-image%E6%AF%94%E8%BE%83/">
        <div itemprop="image" itemscope itemtype="https://schema.org/ImageObject">
          <meta itemprop="url" content="http://jyu213.github.io/images/default.jpg" />
          <meta itemprop="width" content="800">
          <meta itemprop="height" content="800">
        </div>
        <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
          <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <meta itemprop="url" content="http://jyu213.github.io/images/logo.jpg">
            <meta itemprop="width" content="100">
            <meta itemprop="height" content="100">
          </div>
          <meta itemprop="name" content="见见 - 前端小记">
        </div>
        <div itemprop="author" itemscope itemtype="https://schema.org/Person">
          <meta itemprop="name" content="见见">
        </div>

        <header class="article-header">
          <h1 class="article-title">主流CSS image比较</h1>

          <time itemprop="datePublished" pubdate="pubdate" datetime="2014-08-29T00:00:00&#43;00:00">2014-08-29</time>

          
            <a href="http://jyu213.github.io/tags/doc" class="tag">doc</a> 
          
        </header>

        <div class="article-body" itemprop="articleBody">
          

<p>在还原设计图的时候，难免会碰到一些样式图片的引用。如何来对这些图片做优化呢？本文简单的梳理了一下目前几种比较常用的使用方式。
注：
1. 有更好的方法的话，欢迎补充。
2. 下文未对性能问题做真实的测试，请保持一颗好奇的心，并告诉我们）</p>

<h3 id="css-sprite:3d62bd3930627ecd781a60ae9258c8eb">CSS Sprite</h3>

<p>这是目前使用比较多的方式。也是我个人认为相对最优的一种解决方式。当然，这里的最优指的是特定环境。比如移动客户端，就不一定要这么干。CSS Sprite 是将页面中所使用到的小图片整合到一张大图上去。大家都知道，客户端向服务器发送请求是很有代价的，特别是在移动端，所以，sprite 的提出是为了减少 http 请求数，从而加快页面加载速度。</p>

<h4 id="使用方式:3d62bd3930627ecd781a60ae9258c8eb">使用方式</h4>

<ul>
<li>先将小图片整合到一张大图上</li>
<li>css 引入背景图片</li>
<li>然后依据图标的位置使用 background-position 进行定位</li>
</ul>

<h4 id="使用技巧:3d62bd3930627ecd781a60ae9258c8eb">使用技巧</h4>

<ul>
<li>切图的时候就构思拼接好图片（不然后期抓心挠肺的，当然，善用工具的出门右转）</li>
<li>排序有序，便于后期维护(个人建议图标从上到下排列)。有利于 background-position 定位</li>
<li>定位时避免使用 right, bottom 等（后期图片尺寸变化后就不一定了好不）</li>
<li>合理预留空白位置（空太多文件变大，太小引起图标重叠）</li>
</ul>

<h4 id="优点:3d62bd3930627ecd781a60ae9258c8eb">优点</h4>

<ul>
<li>减少 http 请求。（这个是最大的优点）</li>
<li>对你存在的图片一目了然（不知道这个算不算，如改进版3.0拿到的图哪些图标是之前已存在不需要重新切了的）</li>
</ul>

<h4 id="缺点:3d62bd3930627ecd781a60ae9258c8eb">缺点</h4>

<ul>
<li>图片合并定位费时费力（谁用谁知道啊）</li>
</ul>

<h4 id="其它:3d62bd3930627ecd781a60ae9258c8eb">其它</h4>

<ul>
<li>github 上有个 <a href="https://github.com/Ensighten/grunt-spritesmith">grunt 合并 sprite</a> 的组件，可以看看</li>
</ul>

<h3 id="image-data-uri:3d62bd3930627ecd781a60ae9258c8eb">image data URI</h3>

<p>即将图片资源转换为 base64 字符串格式嵌到页面或样式中。这样连图片的请求链接都省了。
如：</p>

<h4 id="使用方式-1:3d62bd3930627ecd781a60ae9258c8eb">使用方式</h4>

<pre><code>    /** 数据格式 **/
    data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAE1JREFUKJHV0MEOwCAIA9DW7MP983pymUaweluv8IAABJFUJdWonqEeD0/IwwHK8QatsYlGfIhezM9WOc8jSQAoTvMqTzY1u+Z6449gA9r24D4iZ6wwAAAAAElFTkSuQmCC

    /** 样式引用 **/
    .icon{
      width: 30px; height: 30px;
      background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAE1JREFUKJHV0MEOwCAIA9DW7MP983pymUaweluv8IAABJFUJdWonqEeD0/IwwHK8QatsYlGfIhezM9WOc8jSQAoTvMqTzY1u+Z6449gA9r24D4iZ6wwAAAAAElFTkSuQmCC);
    }
</code></pre>

<h4 id="标签语法:3d62bd3930627ecd781a60ae9258c8eb">标签语法：</h4>

<ul>
<li>data : 取得数据协议</li>
<li>image/png : 取得数据的协议名称（注意这里也图片资源也可以使用字体等）</li>
<li>base64 : 数据编码方式</li>
<li>iVBOR&hellip; : 编码后数据</li>
</ul>

<p><a href="http://baike.baidu.com/view/469071.htm">Base64编码</a> 自行百度科普吧。</p>

<h4 id="优点-1:3d62bd3930627ecd781a60ae9258c8eb">优点</h4>

<ul>
<li>减少 HTTP 请求</li>
<li>避免某些文件跨域</li>
<li>无图片缓存等问题(但是一般 css 也是有缓存的好不好)</li>
</ul>

<h4 id="缺点-1:3d62bd3930627ecd781a60ae9258c8eb">缺点</h4>

<ul>
<li>兼容性 （ IE6,7 不兼容, 可以使用 MHTML 来解决 ）</li>
<li>浏览器不会缓存该图片（这里是否是这样我存有疑惑，因为好像看上去也是第一次加载的时候慢）</li>
<li>增加 css 文件大小</li>
<li>编码成本及维护(展示不直观，目前需手动转换，我暂时不知道自动替换之类的插件)</li>
<li>之前有看到过篇测评说性能上比 sprite 微弱一些，一时间找不到链接</li>
</ul>

<p>综合起来，data URI可以使用在
* 图片尺寸很小，使用一条 http 请求有点浪费，如渐变背景框
* 图片在全站大规模使用，且很少被更新的，如 loading 图</p>

<h4 id="在线转换工具:3d62bd3930627ecd781a60ae9258c8eb">在线转换工具</h4>

<ul>
<li><a href="http://www.pjhome.net/web/html5/encodeDataUrl.htm">Encode Data URL</a></li>
<li><a href="http://websemantics.co.uk/online_tools/image_to_data_uri_convertor/">image to data URI</a></li>
</ul>

<h5 id="更新:3d62bd3930627ecd781a60ae9258c8eb">更新</h5>

<ul>
<li><a href="https://github.com/medium/sus">github 资源 sus 可转换 data URI</a></li>
</ul>

<h4 id="参考资料:3d62bd3930627ecd781a60ae9258c8eb">参考资料</h4>

<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/data_URIs">MDN - data URIs</a></li>
</ul>

<h3 id="icon-fonts:3d62bd3930627ecd781a60ae9258c8eb">icon fonts</h3>

<p>由于移动端设备拥有不同分辨率，PPI 等引起的问题， 常常需要针对不同屏幕分辨率来调整优化，如使用 <code>@2x</code> 图片， <code>max-width</code> 限制等。
采用 css @font-face 用来显示 icon 也不失为一种好办法。
因为 icon fonts (字体)是矢量图形，所以不受分辨率的影响，同时可以做到完美缩放；当然，也可使用在 WEB 端。</p>

<h4 id="优点-2:3d62bd3930627ecd781a60ae9258c8eb">优点</h4>

<ul>
<li>文件小</li>
<li>加载性能好</li>
<li>支持 css 样式</li>
<li>IE6/7 下也支持</li>
</ul>

<h4 id="缺点-2:3d62bd3930627ecd781a60ae9258c8eb">缺点</h4>

<ul>
<li>样式限制，使用扁平化风格</li>
<li>移动端还存在不兼容问题 (<a href="https://docs.google.com/spreadsheet/ccc?key=0Ag5_yGvxpINRdHFYeUJPNnZMWUZKR2ItMEpRTXZPdUE#gid=0">兼容表，作者不详</a>)</li>
<li>少量移动设备和 icon fonts 字符编码冲突</li>
<li><a href="http://www.zjgsq.com/1523.html">FF和 IE9 下跨域问题</a></li>
<li><a href="http://www.cnblogs.com/demix/archive/2009/11/28/1612715.html">性能问题</a></li>
</ul>

<h4 id="使用方法:3d62bd3930627ecd781a60ae9258c8eb">使用方法</h4>

<ol>
<li>制作字体文件

<ul>
<li>可以利用字体工具手动制作</li>
<li>也可以利用在线工具自动生成</li>
</ul></li>
<li>在 css 中引用，如下</li>
</ol>

<p>引入字体文件</p>

<pre><code>    @font-face {font-family: 'iconfont';
        src: url('iconfont.eot'); /* IE9*/
        src: url('iconfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
        url('iconfont.woff') format('woff'), /* chrome、firefox */
        url('iconfont.ttf') format('truetype'), /* chrome、firefox、opera、Safari, Android, iOS 4.2+*/
        url('iconfont.svg#uxiconfont') format('svg'); /* iOS 4.1- */
    }
</code></pre>

<p>再定义一个 icon-* 通配我们所有图标的共有 CSS 样式，</p>

<pre><code>    [class^=&quot;icon-&quot;], [class*=&quot; icon-&quot;] {
      display: inline-block;
      speak: none
      font-family: &quot;iconfont&quot;;
      font-size: 16px;
      line-height: 1;
      font-style: normal;
      /** 字体图标出现锯齿的问题： */
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
</code></pre>

<p>最后是利用 :before 来注入每个 icon 对应的字体编码</p>

<pre><code>    .icon-bell:before {
      content: &quot;\003432&quot;;
    }
    .icon-search:before {
      content: &quot;\003433&quot;;
    }
</code></pre>

<h4 id="资源推荐:3d62bd3930627ecd781a60ae9258c8eb">资源推荐</h4>

<ul>
<li><a href="http://www.iconfont.cn/">阿里巴巴矢量图标库</a></li>
<li><a href="https://icomoon.io/">icnMoon</a></li>
<li><a href="http://fortawesome.github.io/Font-Awesome/">font awesome</a></li>
</ul>

<h4 id="参考资料-1:3d62bd3930627ecd781a60ae9258c8eb">参考资料</h4>

<ul>
<li><a href="http://www.infoq.com/cn/articles/icons-fonts-as-your-responsive-strategy">icon fonts 的探析及应用</a></li>
</ul>

<h3 id="其它一些想法:3d62bd3930627ecd781a60ae9258c8eb">其它一些想法</h3>

<ul>
<li>SVG绘图</li>
<li>HTML5 离线文件</li>
<li>localStorage 存储</li>
</ul>

        </div>


        <aside>
          
<div class="ds-thread" data-thread-key="http://jyu213.github.io/blog/2014/08/29/%E4%B8%BB%E6%B5%81css-image%E6%AF%94%E8%BE%83/" data-title="主流CSS image比较" data-url="http://jyu213.github.io/blog/2014/08/29/%E4%B8%BB%E6%B5%81css-image%E6%AF%94%E8%BE%83/"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"j4evee"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>


        </aside>

      </article>

    </div>
    <div class="col-md-4">
      
<aside class="site">

  
  <div class="panel panel-default">
    <div class="panel-heading">
      <h2 class="panel-title">tag</h2>
    </div>
    <div class="list-group">
      
      <a href="http://jyu213.github.io/tags/mobile" class="list-group-item">mobile</a>
      
      <a href="http://jyu213.github.io/tags/doc" class="list-group-item">doc</a>
      
      <a href="http://jyu213.github.io/tags/es6" class="list-group-item">es6</a>
      
      <a href="http://jyu213.github.io/tags/css" class="list-group-item">css</a>
      
      <a href="http://jyu213.github.io/tags/html5" class="list-group-item">html5</a>
      
      <a href="http://jyu213.github.io/tags/git" class="list-group-item">git</a>
      
      <a href="http://jyu213.github.io/tags/js" class="list-group-item">js</a>
      
      <a href="http://jyu213.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96" class="list-group-item">自动化</a>
      
    </div>
  </div>
  

</aside>


    </div>
  </div>

</div>

      </div>
    </div>

    <footer class="site">
      <div class="container">
        <p>&copy; 2017 见见</p>
        <p>Powered by <a href="http://gohugo.io" target="_blank">Hugo</a>,</p>
        <p>Theme <a href="https://github.com/dim0627/hugo_theme_robust" target="_blank">Robust</a> designed by <a href="http://yet.unresolved.xyz" target="_blank">Daisuke Tsuji</a></p>
      </div>
    </footer>

    <script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-41493088-2', 'auto');
      ga('send', 'pageview');
    </script>
    

  </body>
</html>

